<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Langgraph4j Getting Started - wuhunyu|blog</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#3273dc"><meta name="application-name" content="wuhunyu"><meta name="msapplication-TileImage" content="https://static.wuhunyu.top/images/avatar-compress.png"><meta name="msapplication-TileColor" content="#3273dc"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="wuhunyu"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="apple-touch-icon" sizes="72x72" href="https://static.wuhunyu.top/images/avatar-compress.png"><link rel="apple-touch-icon" sizes="96x96" href="https://static.wuhunyu.top/images/avatar-compress.png"><link rel="apple-touch-icon" sizes="128x128" href="https://static.wuhunyu.top/images/avatar-compress.png"><link rel="apple-touch-icon" sizes="256x256" href="https://static.wuhunyu.top/images/avatar-compress.png"><meta name="description" content="ä½ å¥½ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼Œæˆ‘æ˜¯ wuhunyuï¼Œä¸€å Java å¼€å‘ã€‚è¿™æ˜¯æˆ‘çš„ä¸ªäººåšå®¢ï¼Œæˆ‘å°†ä¼šåœ¨è¿™é‡Œåˆ†äº«è‡ªå·±çš„å­¦ä¹ ç¬”è®°"><meta property="og:type" content="blog"><meta property="og:title" content="Langgraph4j Getting Started"><meta property="og:url" content="https://wuhunyu.top/ai/rag/2025/09/langgraph4j-get-starter/index.html"><meta property="og:site_name" content="wuhunyu"><meta property="og:description" content="ä½ å¥½ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼Œæˆ‘æ˜¯ wuhunyuï¼Œä¸€å Java å¼€å‘ã€‚è¿™æ˜¯æˆ‘çš„ä¸ªäººåšå®¢ï¼Œæˆ‘å°†ä¼šåœ¨è¿™é‡Œåˆ†äº«è‡ªå·±çš„å­¦ä¹ ç¬”è®°"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://static.wuhunyu.top/images/avatar-compress.png"><meta property="article:published_time" content="2025-09-02T10:50:00.000Z"><meta property="article:modified_time" content="2025-10-10T11:02:39.592Z"><meta property="article:author" content="wuhunyu"><meta property="article:tag" content="langgraph4j"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://static.wuhunyu.top/images/avatar-compress.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://wuhunyu.top"},"headline":"æœ‰å¿—è€…ï¼Œäº‹ç«Ÿæˆ","image":["https://static.wuhunyu.top/images/avatar-compress.png"],"datePublished":"2025-09-02T10:50:00.000Z","dateModified":"2025-10-10T11:02:39.592Z","author":{"@type":"Person","name":"wuhunyu"},"publisher":{"@type":"Organization","name":"wuhunyu|blog","logo":{"@type":"ImageObject","url":{"text":"wuhunyu"}}},"description":"ä½ å¥½ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼Œæˆ‘æ˜¯ wuhunyuï¼Œä¸€å Java å¼€å‘ã€‚è¿™æ˜¯æˆ‘çš„ä¸ªäººåšå®¢ï¼Œæˆ‘å°†ä¼šåœ¨è¿™é‡Œåˆ†äº«è‡ªå·±çš„å­¦ä¹ ç¬”è®°"}</script><link rel="canonical" href="https://wuhunyu.top/ai/rag/2025/09/langgraph4j-get-starter/index.html"><link rel="icon" href="https://static.wuhunyu.top/images/avatar-compress.png"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/6.0.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/11.7.0/styles/atom-one-light.min.css"><link rel="stylesheet"><link rel="stylesheet" href="/css/customer.css"><link rel="stylesheet" href="/font/iconfont.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdnjs.loli.net/ajax/libs/pace/1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">wuhunyu</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">é¦–é¡µ</a><a class="navbar-item" href="/archives">å½’æ¡£</a><a class="navbar-item" href="/categories">åˆ†ç±»</a><a class="navbar-item" href="/tags">æ ‡ç­¾</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/wuhunyu"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="ç›®å½•" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="æœç´¢" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-10-tablet is-10-desktop is-10-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="https://static.wuhunyu.top/images/2025/09/182a6fa3397c512b0dc83f2674fe2ab8.png" alt="Langgraph4j Getting Started"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-09-02T10:50:00.000Z" title="9/2/2025, 10:50:00 AM">2025-09-02</time>å‘è¡¨</span><span class="level-item"><time dateTime="2025-10-10T11:02:39.592Z" title="10/10/2025, 11:02:39 AM">2025-10-10</time>æ›´æ–°</span><span class="level-item"><a class="link-muted" href="/categories/ai/">ai</a></span><span class="level-item">25 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦3681ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile">Langgraph4j Getting Started</h1><div class="content"><p>æ¬¢è¿æ¥åˆ° LangGraph4jï¼æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨ç†è§£ LangGraph4j çš„æ ¸å¿ƒæ¦‚å¿µã€è¿›è¡Œå®‰è£…ï¼Œå¹¶æ„å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚</p>
<h3 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h3><p>LangGraph4j æ˜¯ä¸€ä¸ªç”¨äºé€šè¿‡å¤§å‹è¯­è¨€æ¨¡å‹ (LLMs) æ„å»ºæœ‰çŠ¶æ€ã€å¤šä»£ç†åº”ç”¨çš„ Java åº“ã€‚å®ƒå—åˆ° Python åº“ LangGraph çš„å¯å‘ï¼Œå¹¶æ—¨åœ¨ä¸ Langchain4j å’Œ Spring AI ç­‰æµè¡Œçš„ Java LLM æ¡†æ¶æ— ç¼åä½œã€‚</p>
<p>å…¶æ ¸å¿ƒåœ¨äºï¼ŒLangGraph4j å…è®¸æ‚¨å®šä¹‰å¾ªç¯å›¾ (cyclical graphs)ï¼Œåœ¨å›¾ä¸­ï¼Œä¸åŒçš„ç»„ä»¶ï¼ˆä»£ç†ã€å·¥å…·æˆ–è‡ªå®šä¹‰é€»è¾‘ï¼‰å¯ä»¥ä»¥æœ‰çŠ¶æ€çš„æ–¹å¼è¿›è¡Œäº¤äº’ã€‚è¿™å¯¹äºæ„å»ºéœ€è¦è®°å¿†ã€ä¸Šä¸‹æ–‡ä»¥åŠä¸åŒâ€œä»£ç†â€ä¹‹é—´åä½œæˆ–äº¤æ¥ä»»åŠ¡èƒ½åŠ›çš„å¤æ‚åº”ç”¨ç¨‹åºè‡³å…³é‡è¦ã€‚</p>
<span id="more"></span>

<h3 id="æ ¸å¿ƒåŠŸèƒ½ä¸ä¼˜åŠ¿"><a href="#æ ¸å¿ƒåŠŸèƒ½ä¸ä¼˜åŠ¿" class="headerlink" title="æ ¸å¿ƒåŠŸèƒ½ä¸ä¼˜åŠ¿"></a>æ ¸å¿ƒåŠŸèƒ½ä¸ä¼˜åŠ¿</h3><p>LangGraph4j æä¾›äº†å¤šé¡¹åŠŸèƒ½å’Œä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>æœ‰çŠ¶æ€æ‰§è¡Œ (Stateful Execution):</strong> åœ¨å›¾èŠ‚ç‚¹ä¹‹é—´ç®¡ç†å’Œæ›´æ–°å…±äº«çŠ¶æ€ï¼Œä»è€Œå®ç°è®°å¿†å’Œä¸Šä¸‹æ–‡æ„ŸçŸ¥ã€‚</li>
<li><strong>å¾ªç¯å›¾ (Cyclical Graphs):</strong> ä¸ä¼ ç»Ÿçš„æœ‰å‘æ— ç¯å›¾ (DAGs) ä¸åŒï¼ŒLangGraph4j æ”¯æŒå¾ªç¯ï¼Œè¿™å¯¹äºåŸºäºä»£ç†çš„æ¶æ„è‡³å…³é‡è¦ï¼Œå› ä¸ºåœ¨è¿™äº›æ¶æ„ä¸­æ§åˆ¶æµå¯ä»¥å›æº¯ï¼ˆä¾‹å¦‚ï¼Œä»£ç†é‡è¯•ä»»åŠ¡æˆ–è¯·æ±‚æ¾„æ¸…ï¼‰ã€‚</li>
<li><strong>æ˜¾å¼æ§åˆ¶æµ (Explicit Control Flow):</strong> æ¸…æ™°åœ°å®šä¹‰å›¾èŠ‚ç‚¹ä¹‹é—´è½¬æ¢çš„è·¯å¾„å’Œæ¡ä»¶ã€‚</li>
<li><strong>æ¨¡å—åŒ– (Modularity):</strong> ä½¿ç”¨æ›´å°çš„ã€å¯å¤ç”¨çš„ç»„ä»¶ï¼ˆèŠ‚ç‚¹ï¼‰æ¥æ„å»ºå¤æ‚çš„ç³»ç»Ÿã€‚</li>
<li><strong>çµæ´»æ€§ (Flexibility):</strong> å¯ä¸å„ç§ LLM æä¾›å•†å’Œè‡ªå®šä¹‰ Java é€»è¾‘é›†æˆã€‚</li>
<li><strong>å¯è§‚æµ‹æ€§ä¸è°ƒè¯• (Observability &amp; Debugging):</strong><ul>
<li><strong>æ£€æŸ¥ç‚¹ (Checkpoints):</strong> åœ¨ä»»ä½•æ—¶é—´ç‚¹ä¿å­˜å›¾çš„çŠ¶æ€ï¼Œä»¥ä¾¿åç»­é‡æ”¾æˆ–æ£€æŸ¥ã€‚è¿™å¯¹äºè°ƒè¯•å’Œç†è§£å¤æ‚çš„äº¤äº’éå¸¸æœ‰ä»·å€¼ã€‚</li>
<li><strong>å›¾å¯è§†åŒ– (Graph Visualization):</strong> ä½¿ç”¨ PlantUML æˆ– Mermaid ç”Ÿæˆå›¾çš„å¯è§†åŒ–è¡¨ç¤ºï¼Œä»¥ç†è§£å…¶ç»“æ„ã€‚</li>
</ul>
</li>
<li><strong>å¼‚æ­¥ä¸æµå¼æ”¯æŒ (Asynchronous &amp; Streaming Support):</strong> é€šè¿‡éé˜»å¡æ“ä½œå’Œä» LLMs æµå¼ä¼ è¾“ç»“æœæ¥æ„å»ºå“åº”è¿…é€Ÿçš„åº”ç”¨ç¨‹åºã€‚</li>
<li><strong>Playground &amp; Studio:</strong> ä¸€ä¸ª Web UIï¼Œç”¨äºå¯è§†åŒ–åœ°æ£€æŸ¥ã€è¿è¡Œå’Œè°ƒè¯•æ‚¨çš„å›¾ã€‚</li>
</ul>
<h3 id="æ ¸å¿ƒæ¦‚å¿µè¯¦è§£"><a href="#æ ¸å¿ƒæ¦‚å¿µè¯¦è§£" class="headerlink" title="æ ¸å¿ƒæ¦‚å¿µè¯¦è§£"></a>æ ¸å¿ƒæ¦‚å¿µè¯¦è§£</h3><p>ç†è§£è¿™äº›æ¦‚å¿µæ˜¯æœ‰æ•ˆä½¿ç”¨ LangGraph4j çš„å…³é”®ï¼š</p>
<h4 id="StateGraph"><a href="#StateGraph" class="headerlink" title="StateGraph&lt;S extends AgentState&gt;"></a>StateGraph&lt;S extends AgentState&gt;</h4><p><code>StateGraph</code> æ˜¯æ‚¨ç”¨æ¥å®šä¹‰åº”ç”¨ç¨‹åºç»“æ„çš„ä¸»è¦ç±»ã€‚æ‚¨å¯ä»¥åœ¨å…¶ä¸­æ·»åŠ èŠ‚ç‚¹å’Œè¾¹æ¥åˆ›å»ºå›¾ã€‚å®ƒç”±ä¸€ä¸ª <code>AgentState</code> è¿›è¡Œå‚æ•°åŒ–ã€‚</p>
<h4 id="AgentState"><a href="#AgentState" class="headerlink" title="AgentState"></a>AgentState</h4><p><code>AgentState</code>ï¼ˆæˆ–ç»§æ‰¿è‡ªå®ƒçš„ç±»ï¼‰ä»£è¡¨å›¾çš„å…±äº«çŠ¶æ€ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåœ¨èŠ‚ç‚¹é—´ä¼ é€’çš„æ˜ å°„ (<code>Map&lt;String, Object&gt;</code>)ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥ä»è¯¥çŠ¶æ€ä¸­è¯»å–æ•°æ®ï¼Œå¹¶è¿”å›å¯¹çŠ¶æ€çš„æ›´æ–°ã€‚</p>
<ul>
<li><strong>æ¨¡å¼ (Schema):</strong> çŠ¶æ€çš„ç»“æ„ç”±ä¸€ä¸ªâ€œæ¨¡å¼â€å®šä¹‰ï¼Œè¯¥æ¨¡å¼æ˜¯ä¸€ä¸ª <code>Map&lt;String, Channel.Reducer&gt;</code>ã€‚æ˜ å°„ä¸­çš„æ¯ä¸ªé”®å¯¹åº”çŠ¶æ€ä¸­çš„ä¸€ä¸ªå±æ€§ã€‚</li>
<li><strong>Channel.Reducer:</strong> å½’çº¦å™¨ (reducer) å®šä¹‰äº†çŠ¶æ€å±æ€§çš„æ›´æ–°æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œæ–°å€¼å¯èƒ½ä¼šè¦†ç›–æ—§å€¼ï¼Œæˆ–è€…è¢«æ·»åŠ åˆ°ä¸€ä¸ªç°æœ‰å€¼çš„åˆ—è¡¨ä¸­ã€‚</li>
<li><strong>Channel.Default<T>:</strong> ä¸ºå°šæœªè®¾ç½®çš„çŠ¶æ€å±æ€§æä¾›ä¸€ä¸ªé»˜è®¤å€¼ã€‚</li>
<li><strong>Channel.Appender<T> &#x2F; MessageChannel.Appender<M>:</strong> ä¸€ç§å¸¸è§çš„å½’çº¦å™¨ç±»å‹ï¼Œå®ƒå°†æ–°å€¼è¿½åŠ åˆ°ä¸çŠ¶æ€å±æ€§å…³è”çš„åˆ—è¡¨ä¸­ã€‚è¿™å¯¹äºç´¯ç§¯æ¶ˆæ¯ã€å·¥å…·è°ƒç”¨æˆ–å…¶ä»–æ•°æ®åºåˆ—éå¸¸æœ‰ç”¨ã€‚<code>MessageChannel.Appender</code> ä¸“ä¸ºèŠå¤©æ¶ˆæ¯è®¾è®¡ï¼Œè¿˜å¯ä»¥é€šè¿‡ ID å¤„ç†æ¶ˆæ¯åˆ é™¤ã€‚</li>
</ul>
<h4 id="èŠ‚ç‚¹-Nodes"><a href="#èŠ‚ç‚¹-Nodes" class="headerlink" title="èŠ‚ç‚¹ (Nodes)"></a>èŠ‚ç‚¹ (Nodes)</h4><p>èŠ‚ç‚¹æ˜¯å›¾ä¸­æ‰§è¡Œæ“ä½œçš„æ„å»ºå—ã€‚ä¸€ä¸ªèŠ‚ç‚¹é€šå¸¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆæˆ–å®ç° <code>NodeAction&lt;S&gt;</code> æˆ– <code>AsyncNodeAction&lt;S&gt;</code> çš„ç±»ï¼‰ï¼Œå®ƒä¼šï¼š</p>
<ol>
<li>æ¥æ”¶å½“å‰çš„ <code>AgentState</code> ä½œä¸ºè¾“å…¥ã€‚</li>
<li>æ‰§è¡ŒæŸäº›è®¡ç®—ï¼ˆä¾‹å¦‚ï¼Œè°ƒç”¨ LLMã€æ‰§è¡Œå·¥å…·ã€è¿è¡Œè‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘ï¼‰ã€‚</li>
<li>è¿”å›ä¸€ä¸ª <code>Map&lt;String, Object&gt;</code>ï¼Œä»£è¡¨å¯¹çŠ¶æ€çš„æ›´æ–°ã€‚è¿™äº›æ›´æ–°éšåä¼šæ ¹æ®æ¨¡å¼ä¸­å®šä¹‰çš„å½’çº¦å™¨åº”ç”¨åˆ° <code>AgentState</code> ä¸Šã€‚</li>
</ol>
<p>èŠ‚ç‚¹å¯ä»¥æ˜¯åŒæ­¥çš„æˆ–å¼‚æ­¥çš„ (<code>CompletableFuture</code>)ã€‚</p>
<h4 id="è¾¹-Edges"><a href="#è¾¹-Edges" class="headerlink" title="è¾¹ (Edges)"></a>è¾¹ (Edges)</h4><p>è¾¹å®šä¹‰äº†èŠ‚ç‚¹ä¹‹é—´çš„æ§åˆ¶æµã€‚</p>
<ul>
<li><strong>æ™®é€šè¾¹ (Normal Edges):</strong> ä»ä¸€ä¸ªèŠ‚ç‚¹åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹çš„æ— æ¡ä»¶è½¬æ¢ã€‚åœ¨èŠ‚ç‚¹ A å®Œæˆåï¼Œæ§åˆ¶æƒæ€»æ˜¯ä¼ é€’ç»™èŠ‚ç‚¹ Bã€‚æ‚¨å¯ä»¥ä½¿ç”¨ <code>addEdge(sourceNodeName, destinationNodeName)</code> æ¥å®šä¹‰å®ƒä»¬ã€‚</li>
<li><strong>æ¡ä»¶è¾¹ (Conditional Edges):</strong> ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ ¹æ®å½“å‰çš„ <code>AgentState</code> åŠ¨æ€ç¡®å®šã€‚åœ¨ä¸€ä¸ªæºèŠ‚ç‚¹å®Œæˆåï¼Œä¼šæ‰§è¡Œä¸€ä¸ª <code>EdgeAction&lt;S&gt;</code>ï¼ˆæˆ– <code>AsyncEdgeAction&lt;S&gt;</code>ï¼‰å‡½æ•°ã€‚è¯¥å‡½æ•°æ¥æ”¶å½“å‰çŠ¶æ€å¹¶è¿”å›ä¸‹ä¸€ä¸ªè¦æ‰§è¡Œçš„èŠ‚ç‚¹çš„åç§°ã€‚è¿™å…è®¸å®ç°åˆ†æ”¯é€»è¾‘ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªä»£ç†å†³å®šä½¿ç”¨å·¥å…·ï¼Œåˆ™è½¬åˆ° â€œexecute_toolâ€ èŠ‚ç‚¹ï¼›å¦åˆ™ï¼Œè½¬åˆ° â€œrespond_to_userâ€ èŠ‚ç‚¹ï¼‰ã€‚æ¡ä»¶è¾¹é€šè¿‡ <code>addConditionalEdges(...)</code> å®šä¹‰ã€‚</li>
<li><strong>å…¥å£ç‚¹ (Entry Points):</strong> æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>addConditionalEntryPoint(...)</code> ä¸ºæ‚¨çš„å›¾å®šä¹‰æ¡ä»¶å…¥å£ç‚¹ã€‚</li>
</ul>
<h4 id="ç¼–è¯‘-Compilation"><a href="#ç¼–è¯‘-Compilation" class="headerlink" title="ç¼–è¯‘ (Compilation)"></a>ç¼–è¯‘ (Compilation)</h4><p>åœ¨ <code>StateGraph</code> ä¸­å®šä¹‰äº†æ‰€æœ‰èŠ‚ç‚¹å’Œè¾¹ä¹‹åï¼Œæ‚¨éœ€è¦å°†å…¶ <code>compile()</code> æˆä¸€ä¸ª <code>CompiledGraph&lt;S extends AgentState&gt;</code>ã€‚è¿™ä¸ªç¼–è¯‘åçš„å›¾æ˜¯æ‚¨çš„é€»è¾‘çš„ä¸€ä¸ªä¸å¯å˜çš„ã€å¯è¿è¡Œçš„è¡¨ç¤ºã€‚ç¼–è¯‘è¿‡ç¨‹ä¼šéªŒè¯å›¾çš„ç»“æ„ï¼ˆä¾‹å¦‚ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨å­¤ç«‹èŠ‚ç‚¹ï¼‰ã€‚</p>
<h4 id="æ£€æŸ¥ç‚¹-Persistence"><a href="#æ£€æŸ¥ç‚¹-Persistence" class="headerlink" title="æ£€æŸ¥ç‚¹ (Persistence)"></a>æ£€æŸ¥ç‚¹ (Persistence)</h4><p>LangGraph4j å…è®¸æ‚¨åœ¨ä»»ä½•æ­¥éª¤ä¿å­˜ï¼ˆCheckpointï¼‰å›¾çš„çŠ¶æ€ã€‚è¿™å¯¹äºä»¥ä¸‹åœºæ™¯æä¸ºæœ‰ç”¨ï¼š</p>
<ul>
<li><strong>è°ƒè¯•:</strong> æ£€æŸ¥ä¸åŒæ—¶é—´ç‚¹çš„çŠ¶æ€ä»¥äº†è§£å‘ç”Ÿäº†ä»€ä¹ˆã€‚</li>
<li><strong>æ¢å¤:</strong> å°†å›¾æ¢å¤åˆ°å…ˆå‰çš„çŠ¶æ€å¹¶ç»§ç»­æ‰§è¡Œã€‚</li>
<li><strong>é•¿æ—¶é—´è¿è¡Œçš„è¿›ç¨‹:</strong> æŒä¹…åŒ–é•¿æ—¶é—´è¿è¡Œçš„ä»£ç†äº¤äº’çš„çŠ¶æ€ã€‚</li>
</ul>
<p>æ‚¨é€šå¸¸ä¼šä½¿ç”¨ä¸€ä¸ª <code>CheckpointSaver</code> çš„å®ç°ï¼ˆä¾‹å¦‚ï¼Œç”¨äºå†…å­˜å­˜å‚¨çš„ <code>MemorySaver</code>ï¼Œæˆ–è€…æ‚¨å¯ä»¥ä¸ºæŒä¹…åŒ–å­˜å‚¨å®ç°è‡ªå·±çš„ç‰ˆæœ¬ï¼‰ã€‚</p>
<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>è¦åœ¨æ‚¨çš„é¡¹ç›®ä¸­ä½¿ç”¨ LangGraph4jï¼Œæ‚¨éœ€è¦å°†å…¶æ·»åŠ ä¸ºä¾èµ–é¡¹ã€‚</p>
<p><strong>Maven:</strong></p>
<p>è¯·ç¡®ä¿æ‚¨ä½¿ç”¨çš„æ˜¯ Java 17 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚</p>
<p><strong>æœ€æ–°ç¨³å®šç‰ˆ (æ¨è):</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">langgraph4j.version</span>&gt;</span>1.6.2<span class="tag">&lt;/<span class="name">langgraph4j.version</span>&gt;</span> <span class="comment">&lt;!-- è¯·æ£€æŸ¥å®é™…çš„æœ€æ–°ç‰ˆæœ¬ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¯é€‰ï¼šæ·»åŠ ç‰©æ–™æ¸…å• (BOM) æ¥ç®¡ç† langgraph4j æ¨¡å—ç‰ˆæœ¬ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.bsc.langgraph4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>langgraph4j-bom<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;langgraph4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.bsc.langgraph4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>langgraph4j-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¦‚æœéœ€è¦ï¼Œæ·»åŠ å…¶ä»– langgraph4j æ¨¡å—ï¼Œä¾‹å¦‚ langgraph4j-langchain4j --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>(æ³¨æ„ï¼šè¯·éšæ—¶è®¿é—® Maven ä¸­å¤®ä»“åº“æŸ¥è¯¢æœ€æ–°çš„ç‰ˆæœ¬å·ã€‚)</p>
<p><strong>å¼€å‘å¿«ç…§ç‰ˆ:</strong> å¦‚æœæ‚¨æƒ³ä½¿ç”¨æœ€æ–°çš„æœªå‘å¸ƒåŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨å¿«ç…§ç‰ˆæœ¬ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.bsc.langgraph4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>langgraph4j-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span> <span class="comment">&lt;!-- æˆ–å½“å‰çš„å¿«ç…§ç‰ˆæœ¬å· --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ‚¨å¯èƒ½éœ€è¦åœ¨ <code>settings.xml</code> æˆ– <code>pom.xml</code> ä¸­é…ç½® Sonatype OSS å¿«ç…§ä»“åº“ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>sonatype-oss-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://central.sonatype.com/repository/maven-snapshots<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ‚¨çš„ç¬¬ä¸€ä¸ªå›¾-ç®€å•ç¤ºä¾‹"><a href="#æ‚¨çš„ç¬¬ä¸€ä¸ªå›¾-ç®€å•ç¤ºä¾‹" class="headerlink" title="æ‚¨çš„ç¬¬ä¸€ä¸ªå›¾ - ç®€å•ç¤ºä¾‹"></a>æ‚¨çš„ç¬¬ä¸€ä¸ªå›¾ - ç®€å•ç¤ºä¾‹</h3><p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªéå¸¸ç®€å•çš„å›¾ï¼Œå®ƒæœ‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼š<code>greeter</code> å’Œ <code>responder</code>ã€‚<code>greeter</code> èŠ‚ç‚¹å°†å‘çŠ¶æ€ä¸­æ·»åŠ ä¸€æ¡é—®å€™æ¶ˆæ¯ã€‚<code>responder</code> èŠ‚ç‚¹å°†æ ¹æ®é—®å€™è¯­æ·»åŠ ä¸€æ¡å“åº”æ¶ˆæ¯ã€‚</p>
<p><strong>1. å®šä¹‰çŠ¶æ€:</strong> æˆ‘ä»¬çš„çŠ¶æ€å°†æŒæœ‰ä¸€ä¸ªæ¶ˆæ¯åˆ—è¡¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.bsc.langgraph4j.state.AgentState;</span><br><span class="line"><span class="keyword">import</span> org.bsc.langgraph4j.state.Channels;</span><br><span class="line"><span class="keyword">import</span> org.bsc.langgraph4j.state.Channel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºæˆ‘ä»¬çš„å›¾å®šä¹‰çŠ¶æ€</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SimpleState</span> <span class="keyword">extends</span> <span class="title class_">AgentState</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MESSAGES_KEY</span> <span class="operator">=</span> <span class="string">&quot;messages&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰çŠ¶æ€çš„æ¨¡å¼ã€‚</span></span><br><span class="line">    <span class="comment">// MESSAGES_KEY å°†æŒæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œæ–°æ¶ˆæ¯å°†è¢«è¿½åŠ åˆ°å…¶ä¸­ã€‚</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;String, Channel&lt;?&gt;&gt; SCHEMA = Map.of(</span><br><span class="line">            MESSAGES_KEY, Channels.appender(ArrayList::<span class="keyword">new</span>)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SimpleState</span><span class="params">(Map&lt;String, Object&gt; initData)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(initData);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">messages</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.&lt;List&lt;String&gt;&gt;value(<span class="string">&quot;messages&quot;</span>)</span><br><span class="line">                .orElse( List.of() );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2. å®šä¹‰èŠ‚ç‚¹:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.bsc.langgraph4j.action.NodeAction;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ é—®å€™è¯­çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GreeterNode</span> <span class="keyword">implements</span> <span class="title class_">NodeAction</span>&lt;SimpleState&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title function_">apply</span><span class="params">(SimpleState state)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;GreeterNode æ­£åœ¨æ‰§è¡Œã€‚å½“å‰æ¶ˆæ¯: &quot;</span> + state.messages());</span><br><span class="line">        <span class="keyword">return</span> Map.of(SimpleState.MESSAGES_KEY, <span class="string">&quot;Hello from GreeterNode!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å“åº”çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ResponderNode</span> <span class="keyword">implements</span> <span class="title class_">NodeAction</span>&lt;SimpleState&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title function_">apply</span><span class="params">(SimpleState state)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ResponderNode æ­£åœ¨æ‰§è¡Œã€‚å½“å‰æ¶ˆæ¯: &quot;</span> + state.messages());</span><br><span class="line">        List&lt;String&gt; currentMessages = state.messages();</span><br><span class="line">        <span class="keyword">if</span> (currentMessages.contains(<span class="string">&quot;Hello from GreeterNode!&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> Map.of(SimpleState.MESSAGES_KEY, <span class="string">&quot;Acknowledged greeting!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Map.of(SimpleState.MESSAGES_KEY, <span class="string">&quot;No greeting found.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3. å®šä¹‰å¹¶ç¼–è¯‘å›¾:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.bsc.langgraph4j.StateGraph;</span><br><span class="line"><span class="keyword">import</span> org.bsc.langgraph4j.GraphStateException;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.bsc.langgraph4j.action.AsyncNodeAction.node_async;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.bsc.langgraph4j.StateGraph.START;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.bsc.langgraph4j.StateGraph.END;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SimpleGraphApp</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> GraphStateException &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">GreeterNode</span> <span class="variable">greeterNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GreeterNode</span>();</span><br><span class="line">        <span class="type">ResponderNode</span> <span class="variable">responderNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponderNode</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å®šä¹‰å›¾çš„ç»“æ„</span></span><br><span class="line">       <span class="type">var</span> <span class="variable">stateGraph</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StateGraph</span>&lt;&gt;(SimpleState.SCHEMA, initData -&gt; <span class="keyword">new</span> <span class="title class_">SimpleState</span>(initData))</span><br><span class="line">            .addNode(<span class="string">&quot;greeter&quot;</span>, node_async(greeterNode))</span><br><span class="line">            .addNode(<span class="string">&quot;responder&quot;</span>, node_async(responderNode))</span><br><span class="line">            <span class="comment">// å®šä¹‰è¾¹</span></span><br><span class="line">            .addEdge(START, <span class="string">&quot;greeter&quot;</span>) <span class="comment">// ä» greeter èŠ‚ç‚¹å¼€å§‹</span></span><br><span class="line">            .addEdge(<span class="string">&quot;greeter&quot;</span>, <span class="string">&quot;responder&quot;</span>)</span><br><span class="line">            .addEdge(<span class="string">&quot;responder&quot;</span>, END)   <span class="comment">// åœ¨ responder èŠ‚ç‚¹åç»“æŸ</span></span><br><span class="line">             ;</span><br><span class="line">        <span class="comment">// ç¼–è¯‘å›¾</span></span><br><span class="line">        <span class="type">var</span> <span class="variable">compiledGraph</span> <span class="operator">=</span> stateGraph.compile();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿è¡Œå›¾</span></span><br><span class="line">        <span class="comment">// `stream` æ–¹æ³•è¿”å›ä¸€ä¸ª AsyncGeneratorã€‚</span></span><br><span class="line">        <span class="comment">// ä¸ºç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°†æ”¶é›†ç»“æœã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ‚¨å¯èƒ½ä¼šåœ¨ç»“æœåˆ°è¾¾æ—¶å³æ—¶å¤„ç†å®ƒä»¬ã€‚</span></span><br><span class="line">        <span class="comment">// åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å…³å¿ƒçš„æ˜¯æ‰§è¡Œåçš„æœ€ç»ˆçŠ¶æ€é¡¹ã€‚</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> item : compiledGraph.stream( Map.of( SimpleState.MESSAGES_KEY, <span class="string">&quot;Let&#x27;s, begin!&quot;</span> ) ) ) &#123;</span><br><span class="line">            System.out.println( item );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è§£é‡Š:</strong></p>
<ul>
<li>æˆ‘ä»¬å®šä¹‰äº† <code>SimpleState</code>ï¼Œå…¶ä¸­ <code>MESSAGES_KEY</code> ä½¿ç”¨ <code>AppenderChannel</code> æ¥ç´¯ç§¯å­—ç¬¦ä¸²ã€‚</li>
<li><code>GreeterNode</code> æ·»åŠ äº†ä¸€æ¡ â€œHelloâ€ æ¶ˆæ¯ã€‚</li>
<li><code>ResponderNode</code> æ£€æŸ¥æ˜¯å¦å­˜åœ¨é—®å€™è¯­å¹¶æ·»åŠ ä¸€æ¡ç¡®è®¤æ¶ˆæ¯ã€‚</li>
<li>æˆ‘ä»¬å®šä¹‰äº† <code>StateGraph</code>ï¼Œæ·»åŠ äº†èŠ‚ç‚¹ï¼Œå¹¶ç”¨è¾¹æŒ‡å®šäº†æµç¨‹ï¼š<code>START</code> -&gt; <code>greeter</code> -&gt; <code>responder</code> -&gt; <code>END</code>ã€‚</li>
<li><code>stateGraph.compile()</code> åˆ›å»ºäº†å¯è¿è¡Œçš„ <code>CompiledGraph</code>ã€‚</li>
<li><code>compiledGraph.stream(initialState)</code> æ‰§è¡Œè¯¥å›¾ã€‚æˆ‘ä»¬éå†æµä»¥è·å–æœ€ç»ˆçŠ¶æ€ã€‚æµä¸­çš„æ¯ä¸€é¡¹éƒ½ä»£è¡¨ä¸€ä¸ªèŠ‚ç‚¹æ‰§è¡Œåçš„çŠ¶æ€ã€‚</li>
</ul>
<p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†åŸºæœ¬çš„å·¥ä½œæµç¨‹ï¼šå®šä¹‰çŠ¶æ€ã€å®šä¹‰èŠ‚ç‚¹ã€ç”¨è¾¹è¿æ¥å®ƒä»¬ã€ç¼–è¯‘å¹¶è¿è¡Œã€‚</p>
<h3 id="è¿è¡Œæ‚¨çš„å›¾"><a href="#è¿è¡Œæ‚¨çš„å›¾" class="headerlink" title="è¿è¡Œæ‚¨çš„å›¾"></a>è¿è¡Œæ‚¨çš„å›¾</h3><p>å¦‚ç¤ºä¾‹æ‰€ç¤ºï¼Œæ‚¨é€šå¸¸ä½¿ç”¨ä»¥ä¸‹æ‰§è¡Œæ–¹æ³•ä¹‹ä¸€æ¥è¿è¡Œä¸€ä¸ªç¼–è¯‘åçš„å›¾ï¼š</p>
<ul>
<li><code>stream(S initialState, RunnableConfig config)</code>: æ‰§è¡Œå›¾å¹¶è¿”å›ä¸€ä¸ª <code>AsyncGenerator&lt;S&gt;</code>ã€‚æ¯ä¸ªäº§ç”Ÿ (yield) çš„é¡¹éƒ½æ˜¯ä¸€ä¸ªèŠ‚ç‚¹å®Œæˆåçš„çŠ¶æ€ <code>S</code>ã€‚è¿™å¯¹äºè§‚å¯Ÿæ¯ä¸€æ­¥çš„çŠ¶æ€æˆ–æµå¼å¤„ç†éƒ¨åˆ†ç»“æœå¾ˆæœ‰ç”¨ã€‚</li>
<li><code>invoke(S initialState, RunnableConfig config)</code>: æ‰§è¡Œå›¾å¹¶è¿”å›ä¸€ä¸ª <code>CompletableFuture&lt;S&gt;</code>ï¼Œè¯¥ <code>Future</code> åœ¨å›¾åˆ°è¾¾ <code>END</code> èŠ‚ç‚¹åï¼Œä»¥æœ€ç»ˆçŠ¶æ€å®Œæˆã€‚</li>
</ul>
<p><code>RunnableConfig</code> å¯ç”¨äºä¼ å…¥è¿è¡Œæ—¶é…ç½®ã€‚</p>
<h3 id="Studio-ğŸ¤©-å¯è§†åŒ–è¿è¡Œæ‚¨çš„å›¾"><a href="#Studio-ğŸ¤©-å¯è§†åŒ–è¿è¡Œæ‚¨çš„å›¾" class="headerlink" title="Studio ğŸ¤© - å¯è§†åŒ–è¿è¡Œæ‚¨çš„å›¾"></a>Studio ğŸ¤© - å¯è§†åŒ–è¿è¡Œæ‚¨çš„å›¾</h3><p>Langgraph4j Studio æ˜¯ä¸€ä¸ªå¯åµŒå…¥çš„ Web åº”ç”¨ç¨‹åºï¼Œç”¨äºå¯è§†åŒ–å’Œå®éªŒå›¾ï¼š</p>
<p>è¦æ¢ç´¢ Langgraph4j Studioï¼Œè¯·è®¿é—® <a href="%E9%93%BE%E6%8E%A5">Studio</a>ã€‚</p>
<h3 id="é¢å¤–ç¦åˆ©-å†…ç½®é›†æˆ"><a href="#é¢å¤–ç¦åˆ©-å†…ç½®é›†æˆ" class="headerlink" title="é¢å¤–ç¦åˆ©: å†…ç½®é›†æˆ"></a>é¢å¤–ç¦åˆ©: å†…ç½®é›†æˆ</h3><h4 id="LangChain4j"><a href="#LangChain4j" class="headerlink" title="LangChain4j"></a>LangChain4j</h4><p>ä½œä¸ºéªŒè¯ LangChain4j é›†æˆçš„é»˜è®¤ç”¨ä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ LangGraph4j å®ç°äº† AgentExecutorï¼ˆå³ ReACT ä»£ç†ï¼‰ã€‚åœ¨é¡¹ç›®çš„æ¨¡å—ä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°å¸¦æœ‰æµ‹è¯•çš„å®Œæ•´å·¥ä½œä»£ç ã€‚æ¬¢è¿éšæ—¶æ£€å‡ºå¹¶å°†å…¶ç”¨ä½œå‚è€ƒã€‚ä»¥ä¸‹æ˜¯ AgentExecutor çš„ä½¿ç”¨ç¤ºä¾‹ã€‚</p>
<p><strong>å®šä¹‰å·¥å…· (Define Tools)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestTool</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Tool(&quot;tool for test AI agent executor&quot;)</span></span><br><span class="line">    String <span class="title function_">execTest</span><span class="params">(<span class="meta">@P(&quot;test message&quot;)</span> String message)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> format( <span class="string">&quot;test tool (&#x27;%s&#x27;) executed with result &#x27;OK&#x27;&quot;</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Tool(&quot;return current number of system thread allocated by application&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">threadCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Thread.getAllStackTraces().size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¿è¡Œä»£ç† (Run Agent)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">model</span> <span class="operator">=</span> OllamaChatModel.builder()</span><br><span class="line">            .modelName( <span class="string">&quot;qwen2.5:7b&quot;</span> )</span><br><span class="line">            .baseUrl(<span class="string">&quot;http://localhost:11434&quot;</span>)</span><br><span class="line">            .supportedCapabilities(Capability.RESPONSE_FORMAT_JSON_SCHEMA)</span><br><span class="line">            .logRequests(<span class="literal">true</span>)</span><br><span class="line">            .logResponses(<span class="literal">true</span>)</span><br><span class="line">            .maxRetries(<span class="number">2</span>)</span><br><span class="line">            .temperature(<span class="number">0.0</span>)</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line"><span class="type">var</span> <span class="variable">agent</span> <span class="operator">=</span> AgentExecutor.builder()</span><br><span class="line">            .chatModel(model)</span><br><span class="line">            .toolsFromObject(<span class="keyword">new</span> <span class="title class_">TestTool</span>())</span><br><span class="line">            .build()</span><br><span class="line">            .compile();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> item : agent.stream( Map.of( <span class="string">&quot;messages&quot;</span>, <span class="string">&quot;perform test twice and return number of current active threads&quot;</span> ) ) ) &#123;</span><br><span class="line">    System.out.println( item );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Spring-AI"><a href="#Spring-AI" class="headerlink" title="Spring AI"></a>Spring AI</h4><p>ä½œä¸ºéªŒè¯ Spring AI é›†æˆçš„é»˜è®¤ç”¨ä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ LangGraph4j å®ç°äº† AgentExecutorï¼ˆå³ ReACT ä»£ç†ï¼‰ã€‚åœ¨é¡¹ç›®çš„æ¨¡å—ä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°å¸¦æœ‰æµ‹è¯•çš„å®Œæ•´å·¥ä½œä»£ç ã€‚æ¬¢è¿éšæ—¶æ£€å‡ºå¹¶å°†å…¶ç”¨ä½œå‚è€ƒã€‚ä»¥ä¸‹æ˜¯ AgentExecutor çš„ä½¿ç”¨ç¤ºä¾‹ã€‚</p>
<p><strong>å®šä¹‰å·¥å…· (Define Tools)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestTool</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Tool(description = &quot;tool for test AI agent executor&quot;)</span></span><br><span class="line">    String <span class="title function_">execTest</span><span class="params">( <span class="meta">@ToolParam(description =&quot;test message&quot;)</span> String message )</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> format( <span class="string">&quot;test tool (&#x27;%s&#x27;) executed with result &#x27;OK&#x27;&quot;</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Tool(description = &quot;return current number of system thread allocated by application&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">threadCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Thread.getAllStackTraces().size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¿è¡Œä»£ç† (Run Agent)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">model</span> <span class="operator">=</span> OllamaChatModel.builder()</span><br><span class="line">            .ollamaApi(OllamaApi.builder().baseUrl(<span class="string">&quot;http://localhost:11434&quot;</span>).build())</span><br><span class="line">            .defaultOptions(OllamaOptions.builder()</span><br><span class="line">                    .model(<span class="string">&quot;qwen2.5:7b&quot;</span>)</span><br><span class="line">                    .temperature(<span class="number">0.1</span>)</span><br><span class="line">                    .build())</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line"><span class="type">var</span> <span class="variable">agent</span> <span class="operator">=</span> AgentExecutor.builder()</span><br><span class="line">        .chatModel(model)</span><br><span class="line">        .toolsFromObject(<span class="keyword">new</span> <span class="title class_">TestTool</span>())</span><br><span class="line">        .build()</span><br><span class="line">        .compile()</span><br><span class="line">        ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> item : agent.stream( Map.of( <span class="string">&quot;messages&quot;</span>, <span class="string">&quot;perform test twice and return number of current active threads&quot;</span> ) ) ) &#123;</span><br><span class="line">    System.out.println( item );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å…³é”®èƒ½åŠ›æ¦‚è§ˆ"><a href="#å…³é”®èƒ½åŠ›æ¦‚è§ˆ" class="headerlink" title="å…³é”®èƒ½åŠ›æ¦‚è§ˆ"></a>å…³é”®èƒ½åŠ›æ¦‚è§ˆ</h3><p>LangGraph4j åŒ…å«äº†æ„å»ºå¤æ‚ä»£ç†åº”ç”¨çš„ä¸°å¯ŒåŠŸèƒ½ï¼š</p>
<ul>
<li><strong>å¼‚æ­¥æ“ä½œ:</strong> èŠ‚ç‚¹å’Œè¾¹å¯ä»¥æ˜¯å¼‚æ­¥çš„ï¼ˆè¿”å› <code>CompletableFuture</code>ï¼‰ï¼Œä»è€Œå…è®¸éé˜»å¡çš„ I&#x2F;O æ“ä½œï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç† LLM è°ƒç”¨æ—¶ã€‚</li>
<li><strong>æµå¼å¤„ç†:</strong> åŸç”Ÿæ”¯æŒé€šè¿‡èŠ‚ç‚¹ä» LLM æµå¼ä¼ è¾“å“åº”ï¼Œå®ç°å®æ—¶è¾“å‡ºã€‚è¯·å‚é˜… <code>how-tos/llm-streaming.ipynb</code>ã€‚</li>
<li><strong>æ£€æŸ¥ç‚¹ (æŒä¹…åŒ–ä¸æ—¶é—´æ—…è¡Œ):</strong> ä¿å­˜å’ŒåŠ è½½å›¾çš„çŠ¶æ€ã€‚è¿™ä½¿æ‚¨å¯ä»¥æ¢å¤é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œé€šè¿‡æ£€æŸ¥ä¸­é—´çŠ¶æ€è¿›è¡Œè°ƒè¯•ï¼Œç”šè‡³â€œæ—¶é—´æ—…è¡Œâ€åˆ°å…ˆå‰çš„çŠ¶æ€ã€‚è¯·å‚é˜… <code>how-tos/persistence.ipynb</code> å’Œ <code>how-tos/time-travel.ipynb</code>ã€‚</li>
<li><strong>å›¾å¯è§†åŒ–:</strong> ç”Ÿæˆå›¾çš„ PlantUML æˆ– Mermaid å›¾è¡¨ä»¥å¯è§†åŒ–å…¶ç»“æ„ï¼Œè¿™æœ‰åŠ©äºç†è§£å’Œè°ƒè¯•ã€‚è¯·å‚é˜… <code>how-tos/plantuml.ipynb</code>ã€‚</li>
<li><strong>Playground &amp; Studio:</strong> LangGraph4j è‡ªå¸¦ä¸€ä¸ªå¯åµŒå…¥çš„ Web UI (Studio)ï¼Œå…è®¸æ‚¨å®æ—¶å¯è§†åŒ–ã€è¿è¡Œå’Œä¸æ‚¨çš„å›¾è¿›è¡Œäº¤äº’ã€‚è¿™å¯¹äºå¼€å‘å’Œè°ƒè¯•éå¸¸å‡ºè‰²ã€‚</li>
<li><strong>å­å›¾ (Child Graphs):</strong> é€šè¿‡åœ¨çˆ¶å›¾çš„èŠ‚ç‚¹å†…åµŒå¥—æ›´å°çš„ã€å¯å¤ç”¨çš„å›¾æ¥æ„å»ºå¤æ‚çš„å›¾ã€‚è¿™ä¿ƒè¿›äº†æ¨¡å—åŒ–å’Œå¯å¤ç”¨æ€§ã€‚è¯·å‚é˜… <code>how-tos/subgraph-as-nodeaction.ipynb</code>ã€<code>how-tos/subgraph-as-compiledgraph.ipynb</code> å’Œ <code>how-tos/subgraph-as-stategraph.ipynb</code> ç¤ºä¾‹ã€‚</li>
<li><strong>å¹¶è¡Œæ‰§è¡Œ:</strong> é…ç½®å›¾çš„æŸäº›éƒ¨åˆ†ä»¥å¹¶è¡Œæ‰§è¡Œå¤šä¸ªèŠ‚ç‚¹ï¼Œä»è€Œæé«˜å¯ä»¥å¹¶å‘è¿è¡Œçš„ä»»åŠ¡çš„æ€§èƒ½ã€‚è¯·å‚é˜… <code>how-tos/parallel-branch.ipynb</code>ã€‚</li>
<li><strong>çº¿ç¨‹ (å¤šè½®å¯¹è¯):</strong> åœ¨å•ä¸ªå›¾å®ä¾‹ä¸­ç®¡ç†ä¸åŒçš„ã€å¹¶è¡Œçš„æ‰§è¡Œçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„æ£€æŸ¥ç‚¹å†å²ã€‚è¿™å¯¹äºåŒæ—¶å¤„ç†å¤šä¸ªç”¨æˆ·ä¼šè¯æˆ–å¯¹è¯è‡³å…³é‡è¦ã€‚</li>
</ul>
<h3 id="åç»­æ­¥éª¤"><a href="#åç»­æ­¥éª¤" class="headerlink" title="åç»­æ­¥éª¤"></a>åç»­æ­¥éª¤</h3><p>æ—¢ç„¶æ‚¨å¯¹ LangGraph4j æœ‰äº†åŸºæœ¬çš„äº†è§£ï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ–¹å¼ç»§ç»­æ‚¨çš„å­¦ä¹ ä¹‹æ—…ï¼š</p>
<ol>
<li><strong>æ¢ç´¢ how-tos:</strong> ä»“åº“ä¸­çš„ <code>how-tos/</code> ç›®å½•åŒ…å«äº† Jupyter notebooksï¼ˆå¯ä½¿ç”¨ IJava ç­‰ Java å†…æ ¸è¿è¡Œï¼‰ï¼Œé€šè¿‡ä»£ç ç¤ºä¾‹æ¼”ç¤ºäº†å„ç§åŠŸèƒ½ã€‚</li>
<li><strong>ç ”ç©¶ç¤ºä¾‹:</strong> æŸ¥çœ‹ <code>samples/</code> ç›®å½•ï¼Œè·å–æ›´å®Œæ•´çš„åº”ç”¨ç¨‹åºç¤ºä¾‹ï¼ŒåŒ…æ‹¬ä¸ Langchain4j å’Œ Spring AI çš„é›†æˆã€‚</li>
<li><strong>æŸ¥é˜… Javadocs:</strong> æœ‰å…³ç±»å’Œæ–¹æ³•çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… API æ–‡æ¡£ (Javadocs)ã€‚ï¼ˆå¦‚æœå®˜æ–¹é¡¹ç›®æ–‡æ¡£ç½‘ç«™å‘ç”Ÿå˜åŒ–ï¼Œé“¾æ¥å¯èƒ½éœ€è¦æ›´æ–°ï¼‰</li>
<li><strong>åŠ¨æ‰‹å®è·µï¼</strong> å­¦ä¹ çš„æœ€ä½³æ–¹å¼æ˜¯å®è·µã€‚å°è¯•ä¿®æ”¹ç¤ºä¾‹æˆ–æ„å»ºæ‚¨è‡ªå·±çš„ç®€å•å›¾ã€‚</li>
</ol>
<p>æˆ‘ä»¬å¸Œæœ›æœ¬æŒ‡å—èƒ½å¸®åŠ©æ‚¨å¼€å§‹ä½¿ç”¨ LangGraph4jã€‚ç¥æ‚¨æ„å»ºæ„‰å¿«ï¼</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Langgraph4j Getting Started</p><p><a href="https://wuhunyu.top/ai/rag/2025/09/langgraph4j-get-starter/index.html">https://wuhunyu.top/ai/rag/2025/09/langgraph4j-get-starter/index.html</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>ä½œè€…</h6><p>wuhunyu</p></div></div><div class="level-item is-narrow"><div><h6>å‘å¸ƒäº</h6><p>2025-09-02</p></div></div><div class="level-item is-narrow"><div><h6>æ›´æ–°äº</h6><p>2025-10-10</p></div></div><div class="level-item is-narrow"><div><h6>è®¸å¯åè®®</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/langgraph4j/">langgraph4j</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://wuhunyu.top" defer></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/ai/dart/2025/09/records/index.html"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Records</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/chat/2025/08/event-listener/index.html"><span class="level-item">æµ…è°ˆ @EventListener å’Œ @TransactionalEventListener</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-2-tablet is-2-desktop is-2-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://static.wuhunyu.top/images/avatar-compress.png" alt="wuhunyu"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">wuhunyu</p><p class="is-size-6 is-block">æœ‰å¿—è€…ï¼Œäº‹ç«Ÿæˆ</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>ğŸ±å–µæ˜ŸğŸ±</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ–‡ç« </p><a href="/archives"><p class="title">244</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">åˆ†ç±»</p><a href="/categories"><p class="title">22</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ ‡ç­¾</p><a href="/tags"><p class="title">98</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/wuhunyu" target="_blank" rel="noopener">å…³æ³¨æˆ‘</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/wuhunyu"><i class="iconfont icon-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="LeetCode" href="https://leetcode.cn/u/wuhunyu"><i class="iconfont icon-likou"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:wuhunyu@gmail.com"><i class="iconfont icon-a-031mail2"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">ç›®å½•</h3><ul class="menu-list"><li><a class="level is-mobile" href="#å¼•è¨€"><span class="level-left"><span class="level-item">1</span><span class="level-item">å¼•è¨€</span></span></a></li><li><a class="level is-mobile" href="#æ ¸å¿ƒåŠŸèƒ½ä¸ä¼˜åŠ¿"><span class="level-left"><span class="level-item">2</span><span class="level-item">æ ¸å¿ƒåŠŸèƒ½ä¸ä¼˜åŠ¿</span></span></a></li><li><a class="level is-mobile" href="#æ ¸å¿ƒæ¦‚å¿µè¯¦è§£"><span class="level-left"><span class="level-item">3</span><span class="level-item">æ ¸å¿ƒæ¦‚å¿µè¯¦è§£</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#StateGraph"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">StateGraph&lt;S extends AgentState&gt;</span></span></a></li><li><a class="level is-mobile" href="#AgentState"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">AgentState</span></span></a></li><li><a class="level is-mobile" href="#èŠ‚ç‚¹-Nodes"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">èŠ‚ç‚¹ (Nodes)</span></span></a></li><li><a class="level is-mobile" href="#è¾¹-Edges"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">è¾¹ (Edges)</span></span></a></li><li><a class="level is-mobile" href="#ç¼–è¯‘-Compilation"><span class="level-left"><span class="level-item">3.5</span><span class="level-item">ç¼–è¯‘ (Compilation)</span></span></a></li><li><a class="level is-mobile" href="#æ£€æŸ¥ç‚¹-Persistence"><span class="level-left"><span class="level-item">3.6</span><span class="level-item">æ£€æŸ¥ç‚¹ (Persistence)</span></span></a></li></ul></li><li><a class="level is-mobile" href="#å®‰è£…"><span class="level-left"><span class="level-item">4</span><span class="level-item">å®‰è£…</span></span></a></li><li><a class="level is-mobile" href="#æ‚¨çš„ç¬¬ä¸€ä¸ªå›¾-ç®€å•ç¤ºä¾‹"><span class="level-left"><span class="level-item">5</span><span class="level-item">æ‚¨çš„ç¬¬ä¸€ä¸ªå›¾ - ç®€å•ç¤ºä¾‹</span></span></a></li><li><a class="level is-mobile" href="#è¿è¡Œæ‚¨çš„å›¾"><span class="level-left"><span class="level-item">6</span><span class="level-item">è¿è¡Œæ‚¨çš„å›¾</span></span></a></li><li><a class="level is-mobile" href="#Studio-ğŸ¤©-å¯è§†åŒ–è¿è¡Œæ‚¨çš„å›¾"><span class="level-left"><span class="level-item">7</span><span class="level-item">Studio ğŸ¤© - å¯è§†åŒ–è¿è¡Œæ‚¨çš„å›¾</span></span></a></li><li><a class="level is-mobile" href="#é¢å¤–ç¦åˆ©-å†…ç½®é›†æˆ"><span class="level-left"><span class="level-item">8</span><span class="level-item">é¢å¤–ç¦åˆ©: å†…ç½®é›†æˆ</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#LangChain4j"><span class="level-left"><span class="level-item">8.1</span><span class="level-item">LangChain4j</span></span></a></li><li><a class="level is-mobile" href="#Spring-AI"><span class="level-left"><span class="level-item">8.2</span><span class="level-item">Spring AI</span></span></a></li></ul></li><li><a class="level is-mobile" href="#å…³é”®èƒ½åŠ›æ¦‚è§ˆ"><span class="level-left"><span class="level-item">9</span><span class="level-item">å…³é”®èƒ½åŠ›æ¦‚è§ˆ</span></span></a></li><li><a class="level is-mobile" href="#åç»­æ­¥éª¤"><span class="level-left"><span class="level-item">10</span><span class="level-item">åç»­æ­¥éª¤</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">æœ€æ–°æ–‡ç« </h3><article class="media"><figure class="media-left"><a class="image" href="/java/2025/10/10/multipart-file/index.html"><img src="https://static.wuhunyu.top/images/2025/10/771da8902ad6b83b69d055b57aa2fe3e.png" alt="MultipartFile è¾“å…¥æµå¯é‡å¤è¯»å—"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-10-10T10:53:00.000Z">2025-10-10</time></p><p class="title"><a href="/java/2025/10/10/multipart-file/index.html">MultipartFile è¾“å…¥æµå¯é‡å¤è¯»å—</a></p><p class="categories"><a href="/categories/MultipartFile/">MultipartFile</a> / <a href="/categories/MultipartFile/%E6%B5%81/">æµ</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/linux/2025/10/04/mac-mini/index.html"><img src="https://static.wuhunyu.top/images/2025/10/fbe798875f3ca35e68f356b42d5865bf.png" alt="è®°ä¸€æ¬¡ä¸ªäººæœåŠ¡å™¨æ“ä½œç³»ç»Ÿåˆ‡æ¢"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-10-04T13:19:00.000Z">2025-10-04</time></p><p class="title"><a href="/linux/2025/10/04/mac-mini/index.html">è®°ä¸€æ¬¡ä¸ªäººæœåŠ¡å™¨æ“ä½œç³»ç»Ÿåˆ‡æ¢</a></p><p class="categories"><a href="/categories/linux/">linux</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/bike/2025/09/14/bike/index.html"><img src="https://static.wuhunyu.top/images/2025/09/fb928ca8b527a783c28b154d431a31f7.png" alt="è‡ªç»„æŠ˜å è‡ªè¡Œè½¦"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-09-14T03:08:00.000Z">2025-09-14</time></p><p class="title"><a href="/bike/2025/09/14/bike/index.html">è‡ªç»„æŠ˜å è‡ªè¡Œè½¦</a></p><p class="categories"><a href="/categories/%E6%8A%98%E5%8F%A0%E8%87%AA%E8%A1%8C%E8%BD%A6/">æŠ˜å è‡ªè¡Œè½¦</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/ai/dart/2025/09/class-modifiers-for-apis/index.html"><img src="https://static.wuhunyu.top/images/2025/09/1ee45566cc4584db50f31250dfb0350b.jpg" alt="Class modifiers for API maintainers"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-09-11T10:59:00.000Z">2025-09-11</time></p><p class="title"><a href="/ai/dart/2025/09/class-modifiers-for-apis/index.html">Class modifiers for API maintainers</a></p><p class="categories"><a href="/categories/ai/">ai</a> / <a href="/categories/ai/dart/">dart</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/ai/dart/2025/09/class-modifiers/index.html"><img src="https://static.wuhunyu.top/images/2025/09/581fcb6acc144e9572507023f4065ca3.png" alt="Class modifiers"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-09-11T10:59:00.000Z">2025-09-11</time></p><p class="title"><a href="/ai/dart/2025/09/class-modifiers/index.html">Class modifiers</a></p><p class="categories"><a href="/categories/ai/">ai</a> / <a href="/categories/ai/dart/">dart</a></p></div></article></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">åˆ†ç±»</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Docker-Hub/"><span class="level-start"><span class="level-item">Docker Hub</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/GitHub-Actions/"><span class="level-start"><span class="level-item">GitHub Actions</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/LeetCode/"><span class="level-start"><span class="level-item">LeetCode</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/LeetCode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"><span class="level-start"><span class="level-item">LeetCodeæ¯æ—¥ä¸€é¢˜</span></span><span class="level-end"><span class="level-item tag">208</span></span></a></li><li><a class="level is-mobile" href="/categories/MultipartFile/"><span class="level-start"><span class="level-item">MultipartFile</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/MultipartFile/%E6%B5%81/"><span class="level-start"><span class="level-item">æµ</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/MyBatis/"><span class="level-start"><span class="level-item">MyBatis</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/ai/"><span class="level-start"><span class="level-item">ai</span></span><span class="level-end"><span class="level-item tag">13</span></span></a><ul><li><a class="level is-mobile" href="/categories/ai/dart/"><span class="level-start"><span class="level-item">dart</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/jvm/"><span class="level-start"><span class="level-item">jvm</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/linux/"><span class="level-start"><span class="level-item">linux</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/mongodb/"><span class="level-start"><span class="level-item">mongodb</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/postgres/"><span class="level-start"><span class="level-item">postgres</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/spring-event/"><span class="level-start"><span class="level-item">spring event</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/spring-event/spring-transaction/"><span class="level-start"><span class="level-item">spring transaction</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%8A%98%E5%8F%A0%E8%87%AA%E8%A1%8C%E8%BD%A6/"><span class="level-start"><span class="level-item">æŠ˜å è‡ªè¡Œè½¦</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%97%85%E6%B8%B8/"><span class="level-start"><span class="level-item">æ—…æ¸¸</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%97%85%E6%B8%B8/%E8%B7%AF%E7%BA%BF%E8%A7%84%E5%88%92/"><span class="level-start"><span class="level-item">è·¯çº¿è§„åˆ’</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E7%A0%B4%E8%A7%A3/"><span class="level-start"><span class="level-item">ç ´è§£</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%A2%8E%E7%A2%8E%E5%BF%B5/"><span class="level-start"><span class="level-item">ç¢ç¢å¿µ</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%AE%97%E6%B3%95/"><span class="level-start"><span class="level-item">ç®—æ³•</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%9D%A2%E7%BB%8F/"><span class="level-start"><span class="level-item">é¢ç»</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">æ ‡ç­¾</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/DataGrip/"><span class="tag">DataGrip</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Dijkstra-%E7%AE%97%E6%B3%95/"><span class="tag">Dijkstra ç®—æ³•</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker-Hub/"><span class="tag">Docker Hub</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GitHub-Actions/"><span class="tag">GitHub Actions</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GoLand/"><span class="tag">GoLand</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/IntelliJ-IDEA/"><span class="tag">IntelliJ IDEA</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JetBrains-%E5%85%A8%E5%AE%B6%E6%A1%B6/"><span class="tag">JetBrains å…¨å®¶æ¡¶</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LeetCode-%E9%87%8C%E7%A8%8B%E7%A2%91/"><span class="tag">LeetCode é‡Œç¨‹ç¢‘</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MyBatis/"><span class="tag">MyBatis</span><span class="tag">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo mb-2" href="/">wuhunyu Â· <a href="http://beian.miit.gov.cn/" target="_blank" style="display: inline-block">èµ£ICPå¤‡2022010426å·</a></a><a class="is-block" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=36070302361043" target="_blank">èµ£å…¬ç½‘å®‰å¤‡ 36070302361043å·</a><p class="is-size-7"><span class="is-size-7">Â© 2025 wuhunyu</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">å…±<span id="busuanzi_value_site_uv">0</span>ä¸ªè®¿å®¢</span></p><p style="align-items: center; line-height: 28px;">æœ¬ç½‘ç«™ç”±<a style="margin: 0 2px" href="https://www.upyun.com/?utm_source=lianmeng&amp;utm_medium=referral" target="_blank" rel="noopener noreferrer"><img style="height: 28px;" src="/images/upyun.png" alt="åˆæ‹äº‘"></a>æä¾›CDNåŠ é€Ÿ/äº‘å­˜å‚¨æœåŠ¡</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script defer src="https://events.vercount.one/js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "æ­¤ç½‘ç«™ä½¿ç”¨Cookieæ¥æ”¹å–„æ‚¨çš„ä½“éªŒã€‚",
          dismiss: "çŸ¥é“äº†ï¼",
          allow: "å…è®¸ä½¿ç”¨Cookie",
          deny: "æ‹’ç»",
          link: "äº†è§£æ›´å¤š",
          policy: "Cookieæ”¿ç­–",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...","untitled":"(æ— æ ‡é¢˜)","posts":"æ–‡ç« ","pages":"é¡µé¢","categories":"åˆ†ç±»","tags":"æ ‡ç­¾"});
        });</script></body></html>